<div class="dashboard">
  <div class="welcome-section">
    <div class="card glass">
      <div class="card-body text-center">
        <h1 class="welcome-title">Sistema de Gestión Hospitalaria</h1>
        <p class="welcome-subtitle">
          Plataforma integral para la administración de servicios médicos
        </p>
      </div>
    </div>
  </div>

  <!-- Diagrama de Arquitectura -->
  <div class="diagram-section" *ngIf="isAdmin">
    <h2 class="section-title">Arquitectura del Sistema</h2>
    <div class="diagram-container">
      <div class="diagram-box frontend">
        <div class="diagram-title">Frontend</div>
        <div class="diagram-subtitle">Angular 17</div>
        <div class="diagram-details">TypeScript, RxJS</div>
      </div>
      <div class="diagram-arrow">→</div>
      <div class="diagram-box backend">
        <div class="diagram-title">Backend</div>
        <div class="diagram-subtitle">FastAPI</div>
        <div class="diagram-details">Python, SQLAlchemy</div>
      </div>
      <div class="diagram-arrow">→</div>
      <div class="diagram-box database">
        <div class="diagram-title">Base de Datos</div>
        <div class="diagram-subtitle">PostgreSQL</div>
        <div class="diagram-details">Neon Cloud</div>
      </div>
    </div>
  </div>

  <!-- Sección de Estadísticas -->
  <div class="statistics-section" *ngIf="isAdmin && !loading">
    <h2 class="section-title">Estadísticas del Sistema</h2>
    <div class="stats-cards-grid">
      <div class="stat-card-large">
        <div class="stat-icon-large">
          <i class="fas fa-users-cog"></i>
        </div>
        <div class="stat-content-centered">
          <h3 class="stat-title">Usuarios Registrados</h3>
          <p class="stat-number">{{ stats.usuariosRegistrados }}</p>
          <p class="stat-description">Total de usuarios en el sistema</p>
        </div>
      </div>

      <div class="stat-card-large">
        <div class="stat-icon-large">
          <i class="fas fa-user-injured"></i>
        </div>
        <div class="stat-content-centered">
          <h3 class="stat-title">Pacientes Registrados</h3>
          <p class="stat-number">{{ stats.pacientesRegistrados }}</p>
          <p class="stat-description">Total de pacientes en el sistema</p>
        </div>
      </div>

      <div class="stat-card-large">
        <div class="stat-icon-large">
          <i class="fas fa-user-md"></i>
        </div>
        <div class="stat-content-centered">
          <h3 class="stat-title">Médicos Registrados</h3>
          <p class="stat-number">{{ stats.medicosRegistrados }}</p>
          <p class="stat-description">Total de médicos disponibles</p>
        </div>
      </div>

      <div class="stat-card-large">
        <div class="stat-icon-large">
          <i class="fas fa-user-nurse"></i>
        </div>
        <div class="stat-content-centered">
          <h3 class="stat-title">Enfermeras Registradas</h3>
          <p class="stat-number">{{ stats.enfermerasRegistradas }}</p>
          <p class="stat-description">Total de enfermeras disponibles</p>
        </div>
      </div>

      <div class="stat-card-large highlight">
        <div class="stat-icon-large">
          <i class="fas fa-procedures"></i>
        </div>
        <div class="stat-content-centered">
          <h3 class="stat-title">Hospitalizaciones Activas</h3>
          <p class="stat-number">{{ stats.hospitalizacionesActivas }}</p>
          <p class="stat-description">Pacientes actualmente hospitalizados</p>
        </div>
      </div>

      <div class="stat-card-large highlight">
        <div class="stat-icon-large">
          <i class="fas fa-calendar-alt"></i>
        </div>
        <div class="stat-content-centered">
          <h3 class="stat-title">Citas del Día</h3>
          <p class="stat-number">{{ stats.citasHoy }}</p>
          <p class="stat-description">Citas programadas para hoy</p>
        </div>
      </div>

      <div class="stat-card-large">
        <div class="stat-icon-large">
          <i class="fas fa-calendar-check"></i>
        </div>
        <div class="stat-content-centered">
          <h3 class="stat-title">Total de Citas</h3>
          <p class="stat-number">{{ stats.totalCitas }}</p>
          <p class="stat-description">Citas registradas en el sistema</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-section" *ngIf="isAdmin && loading">
    <div class="loading-spinner"></div>
    <p>Cargando estadísticas...</p>
  </div>

  <!-- Enlaces de Administración -->
  <div class="admin-links-section" *ngIf="isAdmin">
    <div class="admin-links">
      <a href="http://localhost:8000/docs" target="_blank" class="admin-link">
        <i class="fas fa-code"></i>
        <span>Documentación API</span>
      </a>
      <a href="https://console.neon.tech" target="_blank" class="admin-link">
        <i class="fas fa-database"></i>
        <span>Base de Datos Neon</span>
      </a>
    </div>
  </div>

  <!-- Barra de Navegación Rápida -->
  <div class="dashboard-content" *ngIf="isAdmin">
    <div class="quick-nav-bar">
      <a routerLink="/pacientes" class="nav-link-item">
        <i class="fas fa-user-injured"></i>
        <span class="nav-text">Pacientes</span>
      </a>
      <a routerLink="/medicos" class="nav-link-item">
        <i class="fas fa-user-md"></i>
        <span class="nav-text">Médicos</span>
      </a>
      <a routerLink="/enfermeras" class="nav-link-item">
        <i class="fas fa-user-nurse"></i>
        <span class="nav-text">Enfermeras</span>
      </a>
      <a routerLink="/citas" class="nav-link-item">
        <i class="fas fa-calendar-alt"></i>
        <span class="nav-text">Citas</span>
      </a>
      <a routerLink="/hospitalizaciones" class="nav-link-item">
        <i class="fas fa-procedures"></i>
        <span class="nav-text">Hospitalizaciones</span>
      </a>
      <a routerLink="/historiales-medicos" class="nav-link-item">
        <i class="fas fa-file-medical"></i>
        <span class="nav-text">Historiales Médicos</span>
      </a>
      <a routerLink="/facturas" class="nav-link-item">
        <i class="fas fa-file-invoice-dollar"></i>
        <span class="nav-text">Facturas</span>
      </a>
      <a routerLink="/usuarios" class="nav-link-item">
        <i class="fas fa-users-cog"></i>
        <span class="nav-text">Usuarios</span>
      </a>
    </div>
  </div>

  <!-- Barra de Navegación para Consumidor -->
  <div class="dashboard-content" *ngIf="isConsumidor">
    <div class="quick-nav-bar">
      <a routerLink="/citas" class="nav-link-item">
        <i class="fas fa-calendar-alt"></i>
        <span class="nav-text">Mis Citas</span>
      </a>
      <a routerLink="/facturas" class="nav-link-item">
        <i class="fas fa-file-invoice-dollar"></i>
        <span class="nav-text">Mis Facturas</span>
      </a>
      <a routerLink="/historiales-medicos" class="nav-link-item">
        <i class="fas fa-file-medical"></i>
        <span class="nav-text">Mi Historial</span>
      </a>
    </div>
  </div>

  <!-- Barra de Navegación para Médicos/Enfermeras -->
  <div class="dashboard-content" *ngIf="!isAdmin && !isConsumidor">
    <div class="quick-nav-bar">
      <a routerLink="/citas" class="nav-link-item">
        <i class="fas fa-calendar-alt"></i>
        <span class="nav-text">Mis Citas</span>
      </a>
      <a routerLink="/pacientes" class="nav-link-item">
        <i class="fas fa-user-injured"></i>
        <span class="nav-text">Pacientes</span>
      </a>
      <a routerLink="/hospitalizaciones" class="nav-link-item">
        <i class="fas fa-procedures"></i>
        <span class="nav-text">Hospitalizaciones</span>
      </a>
      <a routerLink="/historiales-medicos" class="nav-link-item">
        <i class="fas fa-file-medical"></i>
        <span class="nav-text">Historiales Médicos</span>
      </a>
      <a routerLink="/medicos" class="nav-link-item">
        <i class="fas fa-user-md"></i>
        <span class="nav-text">Médicos</span>
      </a>
    </div>
  </div>
</div>
